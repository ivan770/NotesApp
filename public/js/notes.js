function deleteNote(e){document.getElementById("loader").style.display="inline-block";var t=new XMLHttpRequest,n="id="+encodeURIComponent(e)+"&_token="+document.getElementsByName("csrf-token")[0].content;t.open("POST","/delete",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&200===t.status&&(document.getElementById("loader").style.display="none",getNote())},t.send(n)}function newNote(e,t,n){document.getElementById("loader").style.display="inline-block";var i=new XMLHttpRequest,t="title="+encodeURIComponent(e)+"&body="+encodeURIComponent(t)+"&public="+encodeURIComponent(n)+"&_token="+document.getElementsByName("csrf-token")[0].content;i.open("POST","/new",!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&200===i.status&&(document.getElementById("loader").style.display="none",document.getElementById("new-form").reset(),getNote())},i.send(t)}function getNote(){for(;cards.firstChild;)cards.removeChild(cards.firstChild);document.getElementById("loader").style.display="inline-block";var e=new XMLHttpRequest,t="_token="+document.getElementsByName("csrf-token")[0].content;e.open("POST","/get",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&200===e.status&&(JSON.parse(e.response).forEach(function(e,t,n){var i=document.createElement("div");i.className="siimple-card",i.setAttribute("id","card-"+e.id),"true"==e.public?i.innerHTML='<div class="siimple-card-header"> <div class="siimple-btn siimple-btn--primary" onclick="copyLink('+e.id+')">Copy link</div> <div class="siimple-btn siimple-btn--light" onclick="editNote('+e.id+')">Edit</div> <div class="siimple-btn siimple-btn--light" onclick="deleteNote('+e.id+')">Delete</div> </div> <div class="siimple-card-body"> <div class="siimple-card-title">'+e.title.replace(/\n/g,"<br />")+"</div>"+e.body.replace(/\n/g,"<br />")+"</div>":i.innerHTML='<div class="siimple-card-header"> <div class="siimple-btn siimple-btn--light" onclick="editNote('+e.id+')">Edit</div> <div class="siimple-btn siimple-btn--light" onclick="deleteNote('+e.id+')">Delete</div> </div> <div class="siimple-card-body"> <div class="siimple-card-title">'+e.title.replace(/\n/g,"<br />")+"</div>"+e.body.replace(/\n/g,"<br />")+"</div>",cards.appendChild(i)}),document.getElementById("loader").style.display="none")},e.send(t)}function editNote(e){location.href="/edit/"+e}function copyLink(e){window.prompt("Use CTRL+C to copy","https://notesapp.ga/public/"+e)}
